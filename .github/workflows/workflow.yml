name: Run test and pre commit

on: [push, pull_request]

jobs:
  pre-commit-checks:
    name: Run pre commit checks
    runs-on: ubuntu-latest

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Run pre-commit checks
      run: |
        poetry install
        poe checks


  run-pytest-checks:
    name: Run pytest
    runs-on: ubuntu-latest
    needs: pre-commit-checks

    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Run pre-commit checks
      run: |
        poetry install
        poe test
